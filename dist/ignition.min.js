/*!
 * IgnitionJS v4.1.1 <https://github.com/carsdotcom>
 * @license Apache 2.0
 * @copyright 2014 Cars.com <http://www.cars.com/>
 * @author Mac Heller-Ogden
 * @summary A fast and flexible, module loader/bootstrapper for AngularJS.
 * @requires LABjs 2.0.3 <http://labjs.com/>.
 */
"use strict";!function(){var e=function(e){this.name="IgnitionError",this.message=e},t=function(t){return function(r,n){var s=typeof r,i=!1,o=!1,u=!0;if("object"!==s||(i=null===r)||(o="[object Array]"===Object.prototype.toString.call(r)),"array"===t?u=o:"object"===t&&(o||i)?u=!1:s!==t&&(u=!1),!u&&n)throw new e("Expected `"+t+"` and instead received `"+s+"`");return u}},r=function(e,t,r){var n;if(r=c(r)?r:[],c(e,!0),e=e.concat(r),a(t))return e.indexOf(t)>=0;if(l(t)){n=/ +?/g,t=t.toString().replace(n,"");for(var s=0;s<e.length;s++)if(l(e[s])&&e[s].toString().replace(n,"")===t)return!0}return!1},n=function(t,n){return function(s){if(!n(s))throw new e("Invalid subject");r(t,s)||t.push(s)}},s=function(e,t){c(t,!0);for(var r=0;r<t.length;r++)e(t[r])},i=function(e){for(var t=0;t<e.length;t++)e[t].call(window)},o=function(e,t,r){return"/"!==t.substr(-1)&&(t+="/"),t+e+"."+r},u=function(t){function s(e){return function(){return Array.prototype.slice.call(this[e],0)}}function i(e){S._registerMulti(this.registerSrc,e)}function o(e){S._registerMulti(this.registerFn,e)}function u(t){if(a(t)){var r=b(t),n=r.parsedSubject,s=r.isOptional;this.registerSrc(S.namedSrcs[n],s)}else{if(!c(t))throw new e("Invalid subject");for(var i=0;i<t.length;i++){var o=b(t[i]),n=o.parsedSubject,s=o.isOptional;this.registerSrc(S.namedSrcs[n],s)}}}function b(e){var t=e.indexOf("?")===e.length-1?e.slice(0,e.length-1):e;return{parsedSubject:t,isOptional:e!==t}}function v(){for(var e=[],t=0;t<S.tierCount;t++)e=e.concat(S.tiers[t].srcs);return e}function h(t){return function(n){var s=void 0===arguments[1]?!1:arguments[1];if(!S.tiers[t].validation(n))throw new e("Invalid subject");r(S.tiers[t].srcs,n,v())||(s?S.tiers[t].optionalSrcs.push(n):S.tiers[t].srcs.push(n))}}var p,m,S=this,y={bundles:{validation:function(e){return a(e)&&/^[A-Za-z]+\w*$/.test(e)},dir:"/app/bundles/",loadCss:!1},bootstrap:function(e){angular.bootstrap(document,e)}};t=function M(e){for(var t,r=1;r<arguments.length;++r)if(t=arguments[r],d(t))for(var n in t)t.hasOwnProperty(n)&&(e[n]=d(t[n])?M({},e[n],t[n]):t[n]);return e}({},y,t),S.namedSrcs=d(t.sources)?t.sources:{},S.bundles={},S.bundles.names=[],S.bundles.getNames=s("names"),S.bundles.modules=d(t.bundles.modules)?t.bundles.modules:{},S.bundleModules={},S.bundleModules.names=[],S.bundleModules.getNames=s("names"),S.bundles.validation=t.bundles.validation,l(S.bundles.validation,!0),S.bundles.dir=t.bundles.dir,a(S.bundles.dir,!0),S.bundles.loadCss=t.bundles.loadCss,g(S.bundles.loadCss,!0),S.bundles.registerOne=n(S.bundles.names,S.bundles.validation),S.bundles.registerMany=function(e){S._registerMulti(this.registerOne,e)},S.bundles.register=function(e){var t=void 0===arguments[1]?S.bundles.modules[e]||[e]:arguments[1];return function(){a(e,!0),S.bundles.registerOne(e),S.bundleModules.registerMany(t)}()},S.bundles.getSrcs=function(e){for(var t=this.getNames(),r=[],n="css"===e?!0:!1,s=n?"css":"js",i=0;i<t.length;i++)r.push(S._buildBundlePath(t[i],this.dir,s));return r},S.bundleModules.registerOne=n(S.bundleModules.names,function(){return!0}),S.bundleModules.registerMany=function(e){S._registerMulti(this.registerOne,e)},S.bootstrap=t.bootstrap,l(S.bootstrap,!0),S.tiers=[],c(t.tiers)?(S.tierCount=t.tiers.length,t.tiers=t.tiers):(S.tierCount=2,t.tiers=[]);for(var _=0;_<S.tierCount;_++){S.tiers[_]={},p=t.tiers[_]&&c(t.tiers[_].aliases),S.tiers[_].aliases=m=p?t.tiers[_].aliases:[];for(var w=0;w<m.length;w++){if(!f(S[m[w]]))throw new e("Illegal alias name");S[m[w]]=S.tiers[_]}S.tiers[_].validation=t.tiers[_]&&l(t.tiers[_].validation)?t.tiers[_].validation:a,S.tiers[_].fns=[],S.tiers[_].srcs=[],S.tiers[_].optionalSrcs=[],S.tiers[_].getSrcs=s("srcs"),S.tiers[_].getOptionalSrcs=s("optionalSrcs"),S.tiers[_].getFns=s("fns"),S.tiers[_].registerSrc=h(_),S.tiers[_].registerFn=n(S.tiers[_].fns,l),S.tiers[_].registerSrcs=i,S.tiers[_].registerFns=o,S.tiers[_].register=u}S.ready={fns:[]},S.ready.getFns=s("fns"),S.ready.registerFn=n(S.ready.fns,l),S.ready.registerFns=function(e){S._registerMulti(this.registerFn,e)}},a=void 0,l=void 0,d=void 0,c=void 0,f=void 0,g=void 0;e.prototype=Error.prototype,a=t("string"),l=t("function"),d=t("object"),c=t("array"),f=t("undefined"),g=t("boolean"),u.fn=u.prototype,u.fn._isString=a,u.fn._isFunction=l,u.fn._isObject=d,u.fn._isArray=c,u.fn._isRegistered=r,u.fn._generateRegistration=n,u.fn._registerMulti=s,u.fn._execFunctionQueue=i,u.fn._buildBundlePath=o,u.fn._loadTier=function(e,t){var r=this;return t.optionalScript(r.tiers[e].getOptionalSrcs()).script(r.tiers[e].getSrcs()).wait(function(){r._execFunctionQueue(r.tiers[e].getFns())})},u.fn._injectCss=function(e){var t,r,n=document.getElementsByTagName("head")[0];t=n.getElementsByTagName("link");for(var s=0;s<t.length;s++)if(t[s].getAttribute("href")===e)return;r=document.createElement("link"),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),n.appendChild(r)},u.fn.load=function(){var t,r=this;if(!$LAB)throw new e("$LAB not found.");t=$LAB;for(var n=0;n<r.tierCount;n++)t=r._loadTier(n,t);if(r.bundles.loadCss)for(var s=0,i=r.bundles.getSrcs("css");s<i.length;s++)r._injectCss(i[s]);t.script(r.bundles.getSrcs()).wait(function(){r.bootstrap(r.bundleModules.getNames()),r._execFunctionQueue(r.ready.getFns())})},window.Ignition=u}();